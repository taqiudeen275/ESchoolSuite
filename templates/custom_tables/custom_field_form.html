{% extends 'base.html' %}

{% block content %}
<h2>Add New Field to Table</h2>

<form method="post" action="">
    {% csrf_token %}
    <input type="hidden" name="table_id" value="{{ table_id }}">
    
    <label for="name">Field Name:</label>
    <input type="text" id="name" name="name" required><br><br>

    <label for="label">Label:</label>
    <input type="text" id="label" name="label" required><br><br>

    <label for="data_type">Data Type:</label>
    <select id="data_type" name="data_type">
        <option value="CharField">Text</option>
        <option value="IntegerField">Integer</option>
        <option value="DecimalField">Decimal</option>
        <option value="BooleanField">Boolean</option>
        <option value="DateField">Date</option>
        <option value="DateTimeField">Date & Time</option>
        <option value="JSONField">JSON</option>
    </select><br><br>

    <label for="required">Required:</label>
    <input type="checkbox" id="required" name="required"><br><br>

    <label for="default_value">Default Value:</label>
    <input type="text" id="default_value" name="default_value"><br><br>

    <label for="help_text">Help Text:</label>
    <input type="text" id="help_text" name="help_text"><br><br>

    <label for="choices">Choices (comma-separated, optional):</label>
    <input type="text" id="choices" name="choices"><br><br>

    <input type="submit" value="Add Field">
</form>
<script>
    document.getElementById('data_type').addEventListener('change', function() {
        var choicesField = document.getElementById('choices').parentElement;
        if (this.value === 'CharField') {
            choicesField.style.display = 'block';
        } else {
            choicesField.style.display = 'none';
        }
    });
</script>
{% endblock %}